
public class AVL<A extends Comparable<A>> {
private A value;
private AVL<A> left;// Should I mention which class I will use?
private AVL<A> right;
private int height;
private int size;
public AVL(A value, AVL<A> left, AVL<A> right) {
	super();
	this.value = value;
	this.left = left;
	this.right = right;
	this.size=size(left)+size(right)+1;
	this.height=Math.max(height(left),height(right))+1;
}
public AVL(A value){
	this(value, null, null);// calls for the first constructor
	this.size=1;
	this.height=1;
}
public static<A extends Comparable<A>> int size(AVL<A> t){
	if(t==null)return 0;
	return t.size;
}
public static<A extends Comparable<A>> int height(AVL<A> t){
	if(t==null)return 0;
	return t.height;
	
}
public static<A extends Comparable<A>> boolean contains(AVL<A> t,A x){
	if(t==null)return false;
	if(t.value.compareTo(x)>0)return contains(t.left,x);
	if(t.value.compareTo(x)<0)return contains(t.right,x);
	return true;
}
//balance
//right
public static<A extends Comparable<A>> AVL<A> rightRotation(AVL<A> t){
	if(t==null||t.left==null)return t;//cannot rotate a null or t.left==null
	AVL<A>cmp=t.left;
	t.left=cmp.right;
	cmp.right=t;
	
	t.height=Math.max(height(t.left),height(t.right))+1;
	t.size=size(t.left)+size(t.right)+1;
	cmp.height=Math.max(height(cmp.left),height(cmp.right))+1;
	cmp.size=size(cmp.left)+size(cmp.right)+1;
	return cmp;	
}
// left
public static<A extends Comparable<A>> AVL<A> leftRotation(AVL<A> t){
	if(t==null||t.right==null)return t;//cannot rotate a null or t.right==null
	AVL<A>cmp=t.right;
	t.right=cmp.left;
	cmp.left=t;
	
	t.height=Math.max(height(t.left),height(t.right))+1;
	t.size=size(t.left)+size(t.right)+1;
	cmp.height=Math.max(height(cmp.left),height(cmp.right))+1;
	cmp.size=size(cmp.left)+size(cmp.right)+1;
	return cmp;	
}
public static<A extends Comparable<A>> AVL<A>  balance(AVL<A> t){
if(t==null)return null;
if(height(t.left)-height(t.right)>=2){
	if(height(t.left.left)>=height(t.left.right))return rightRotation(t);
	t.left=leftRotation(t.left);
	return rightRotation(t.left);
}
else{
	if(height(t.left)-height(t.right)<=-2){
		AVL r=t.right;
		if(height(r.right)>=height(r.left))return leftRotation(t);
		r=rightRotation(r);
		return leftRotation(r);
	}
	
}
	
	
	
	
}
public static<A extends Comparable<A>> AVL<A> add(AVL<A> t,A x){
	if(t==null) return new AVL<A>(x);
	if(t.value.compareTo(x)==0) return t;
	if(t.value.compareTo(x)>0)t.left=add(t.left,x);
	if(t.value.compareTo(x)<0)t.right=add(t.right,x);
	t.height=Math.max(height(t.left), height(t.right));
	t.size=size(t.left)+size(t.right)+1;
	t=balance(t);
	return t;
}
//suppose t is not null;
public static<A extends Comparable<A>> A getMin(AVL<A> t){
	A m=null;
	while(t!=null){
		m=t.value;
		t=t.left;
	}
	return m;
}

public static<A extends Comparable<A>> AVL<A> removeMin(AVL<A> t){
	if(t==null)return null;
	if(t.left==null)return t.right;
	t.left=removeMin(t.left);
	t.height=Math.max(height(t.left), height(t.right));
	t.size=size(t.left)+size(t.right)+1;
	return balance(t);
}
public static<A extends Comparable<A>> AVL<A> remove(AVL<A> t, A x){
if(t==null)return null;
if(t.value.compareTo(x)>0){
	t.left=remove(t.left,x);
}
if(t.value.compareTo(x)<0){
	t.right=remove(t.right,x);
}
if(t.value.compareTo(x)==0){
if(t.right==null)return t.left;
A m=getMin(t.right);
t.right=removeMin(t.right);
t.value=m;	
}
t.height=Math.max(height(t.left), height(t.right));
t.size=size(t.left)+size(t.right)+1;
return balance(t);
	
}






}
